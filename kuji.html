<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è±ªè¯æ™¯å“ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãã˜</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
            background-color: #f7f9fc;
            padding: 20px;
            box-sizing: border-box;
        }

        /* æ¡ˆå†…ãƒ†ã‚­ã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #instruction {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            height: 24px;
        }

        /* ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆå…¨ä½“ã®ã‚³ãƒ³ãƒ†ãƒŠ */
        .roulette-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin-bottom: 30px;
        }

        /* é€†ä¸‰è§’å½¢ã®é‡ï¼ˆãƒã‚¤ãƒ³ã‚¿ãƒ¼ï¼‰ */
        .pointer {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 25px solid #f1c40f;
            z-index: 10;
            filter: drop-shadow(0 3px 3px rgba(0,0,0,0.3));
        }

        /* å††å½¢ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆæœ¬ä½“ */
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            /* ç¢ºç‡ã«åˆã‚ã›ã¦è§’åº¦ã¨è‰²ã‚’è¨­å®š */
            background: conic-gradient(
                #e74c3c 0deg 36deg,     /* 1ç­‰(10%): èµ¤ */
                #f39c12 36deg 72deg,    /* 2ç­‰(10%): ã‚ªãƒ¬ãƒ³ã‚¸ */
                #2ecc71 72deg 144deg,   /* 3ç­‰(20%): ç·‘ */
                #3498db 144deg 216deg,  /* 4ç­‰(20%): é’ */
                #9b59b6 216deg 360deg   /* å‚åŠ è³(40%): ç´« */
            );
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            transition: transform 3.5s cubic-bezier(0.1, 0.7, 0.1, 1);
        }

        /* çµæœãƒ†ã‚­ã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #result-text {
            font-size: 1.1rem;
            font-weight: bold;
            min-height: 80px;
            color: #34495e;
            text-align: center;
            line-height: 1.6;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        /* å½“ãŸã‚Šãƒ¡ã‚¤ãƒ³æ–‡å­—ã‚’å¤§ããã™ã‚‹ç”¨ã®ã‚¯ãƒ©ã‚¹ */
        .highlight {
            font-size: 1.8rem;
            display: block;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <div id="instruction">ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãŒå›ã£ã¦ã„ã¾ã™...</div>

    <div class="roulette-container">
        <div class="pointer"></div>
        <div class="wheel" id="wheel"></div>
    </div>

    <div id="result-text"></div>

    <script>
        window.onload = function() {
            setTimeout(spinWheel, 500);
        };

        function spinWheel() {
            const wheel = document.getElementById('wheel');
            const resultText = document.getElementById('result-text');
            const instruction = document.getElementById('instruction');

            // 1. ç¢ºç‡åˆ¤å®š (0.0 ã€œ 0.999...)
            const randomNum = Math.random();
            let targetAngle = 0;
            let resultData = {};

            // å¢ƒç•Œã®ç·šã‚®ãƒªã‚®ãƒªã«æ­¢ã¾ã‚‰ãªã„ã‚ˆã†ã«ã€å„ã‚¨ãƒªã‚¢ã®å†…å´æ•°åº¦ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªåœæ­¢ä½ç½®ã«è¨­å®š
            if (randomNum < 0.10) {
                // 1ç­‰ï¼šãŠç±³ï¼ˆ10%ï¼‰ -> 0åº¦ã€œ36åº¦ã®ã‚¨ãƒªã‚¢
                targetAngle = Math.floor(Math.random() * 32) + 2; 
                resultData = { text: "ğŸ‰ 1ç­‰ï¼ãŠç±³ ğŸ‰", color: "#e74c3c" };
            } 
            else if (randomNum < 0.20) {
                // 2ç­‰ï¼šã·ã£ãã‚Šã‚·ãƒ¼ãƒ«ï¼ˆ10%ï¼‰ -> 36åº¦ã€œ72åº¦ã®ã‚¨ãƒªã‚¢
                targetAngle = Math.floor(Math.random() * 32) + 38;
                resultData = { text: "âœ¨ 2ç­‰ï¼ã·ã£ãã‚Šã‚·ãƒ¼ãƒ« âœ¨", color: "#f39c12" };
            } 
            else if (randomNum < 0.40) {
                // 3ç­‰ï¼šæ—¥ç”¨å“ï¼ˆ20%ï¼‰ -> 72åº¦ã€œ144åº¦ã®ã‚¨ãƒªã‚¢
                targetAngle = Math.floor(Math.random() * 68) + 74;
                resultData = { text: "ğŸˆ 3ç­‰ï¼æ—¥ç”¨å“ ğŸˆ", color: "#2ecc71" };
            } 
            else if (randomNum < 0.60) {
                // 4ç­‰ï¼šãŠã‚‚ã¡ã‚ƒï¼ˆ20%ï¼‰ -> 144åº¦ã€œ216åº¦ã®ã‚¨ãƒªã‚¢
                targetAngle = Math.floor(Math.random() * 68) + 146;
                resultData = { text: "ğŸ§¸ 4ç­‰ï¼ãŠã‚‚ã¡ã‚ƒ ğŸ§¸", color: "#3498db" };
            } 
            else {
                // å‚åŠ è³ï¼ˆ40%ï¼‰ -> 216åº¦ã€œ360åº¦ã®ã‚¨ãƒªã‚¢
                targetAngle = Math.floor(Math.random() * 140) + 218;
                resultData = { text: "ğŸ‘ å‚åŠ è³ï¼ ğŸ‘", color: "#9b59b6" };
            }

            // 2. å›è»¢è§’åº¦ã®è¨ˆç®—
            const rotationToAdd = 360 - targetAngle;
            const spinAmount = (5 * 360) + rotationToAdd; // æœ€ä½5å›è»¢

            // 3. ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›è»¢ã•ã›ã‚‹
            wheel.style.transform = `rotate(${spinAmount}deg)`;

            // 4. å›è»¢çµ‚äº†å¾Œã«çµæœã‚’è¡¨ç¤º
            setTimeout(() => {
                instruction.innerHTML = ""; 
                
                // çµæœã«å¿œã˜ã¦ãƒ†ã‚­ã‚¹ãƒˆã®è‰²ã¨å†…å®¹ã‚’å‹•çš„ã«å¤‰æ›´
                resultText.innerHTML = `
                    <span class='highlight' style='color:${resultData.color}'>${resultData.text}</span>
                    æ™¯å“ã‚’ãŠæ¸¡ã—ã—ã¾ã™ï¼<br>ã‚¹ã‚¿ãƒƒãƒ•ã«ã“ã®ç”»é¢ã‚’ãŠè¦‹ã›ãã ã•ã„ï¼
                `;
                
                resultText.style.opacity = 1; 
            }, 3500);
        }
    </script>

</body>
</html>
